<div class="UserCard__wrapper">
    <Card
            :title="computedTitle"
            :visible="cardVisible"
            @cardVisibleChange="cardVisibleChange"
            @cardSave="cardSave"
    >

        <template #content>
                <el-form
                        ref="ruleFormRef"
                        :model="data"
                        :rules="rules"
                        label-width="120px"
                        status-icon
                >
                    <el-form-item class="UserCard__avatar-wrapper">
                        <div class="full-width flex flex-align-center flex-justify-center">
                            <el-upload
                                    class="avatar-uploader"
                                    :show-file-list="false"
                            >
                                <img v-if="data.photo_url" :src="data.photo_url" class="avatar" />
                                <el-icon v-else class="avatar-uploader-icon"><Plus /></el-icon>
                            </el-upload>
                        </div>
                    </el-form-item>
                    <el-form-item label="Имя" prop="name">
                        <el-input v-model="data.name" :clearable="true" :show-word-limit="true" :maxlength="20" :autosize="true"/>
                    </el-form-item>
                    <el-form-item label="Фамилия" prop="surname">
                        <el-input v-model="data.surname" :clearable="true" :show-word-limit="true" :maxlength="40" :autosize="true"/>
                    </el-form-item>
                    <el-form-item label="Отчество" prop="second_name">
                        <el-input v-model="data.second_name" :clearable="true" :show-word-limit="true" :maxlength="40" :autosize="true"/>
                    </el-form-item>
                    <el-form-item label="Телефон" prop="telephone">
                        <el-input
                                v-model="data.telephone"
                                placeholder="Номер телефона"
                                :clearable="true" :show-word-limit="true"
                                :maxlength="11"
                                :autosize="true"
                                :formatter="(value) => `+7 ${value}`.replace(/\B(?=(\d{3})+(?!\d))/g, ',')"
                                :parser="(value) => value.replace(/\+7'\s?|(,*)/g, '')"
                        />
                    </el-form-item>
                    <el-form-item label="Логин" prop="login">
                        <el-input v-model="data.login" :clearable="true" :show-word-limit="true" :minlength="4" :maxlength="20" :autosize="true"/>
                    </el-form-item>
                    <el-form-item label="Пароль" prop="password" v-if="!data.id">
                        <el-input v-model="data.password" type="password" autocomplete="off" />
                    </el-form-item>
                    <el-form-item label="Подтверждение" prop="checkPass" v-if="!data.id && data.password">
                        <el-input
                                v-model="data.checkPass"
                                type="password"
                                autocomplete="off"
                        />
                    </el-form-item>
                    <el-form-item label="Email:" prop="email">
                        <el-input v-model="data.email" :clearable="true" :autosize="true"/>
                    </el-form-item>
                </el-form>
        </template>
    </Card>
</div>
